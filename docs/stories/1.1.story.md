# Story 1.1: Project Structure and Build System

## Status
Approved

## Story
**As a** developer,
**I want** to set up the Go monorepo with proper structure and build configuration,
**so that** I can compile a single spcstr binary with embedded hook functionality.

## Acceptance Criteria
1. Go module initialized with go.mod at project root
2. Directory structure created: `cmd/spcstr/`, `internal/hooks/`, `internal/state/`, `internal/tui/`
3. Single Makefile or build script compiles one spcstr binary
4. Build process runs without errors on macOS and Linux
5. All Cobra, Bubbletea, Lipgloss, and Glamour dependencies properly imported
6. Binary size remains reasonable (<50MB) with embedded functionality

## Tasks / Subtasks
- [ ] Initialize Go module and project root (AC: 1)
  - [ ] Run `go mod init github.com/username/spcstr` at project root
  - [ ] Set Go version to 1.21+ in go.mod
- [ ] Create required directory structure (AC: 2)
  - [ ] Create `cmd/spcstr/` directory with main.go entry point
  - [ ] Create `internal/hooks/` directory for hook implementations
  - [ ] Create `internal/state/` directory for state management
  - [ ] Create `internal/tui/` directory for TUI implementation
- [ ] Set up dependency management (AC: 5)
  - [ ] Add Cobra v1.8+ dependency for CLI framework
  - [ ] Add Bubbletea v0.25+ dependency for TUI framework
  - [ ] Add Lipgloss v0.9+ dependency for terminal styling
  - [ ] Add Glamour v0.6+ dependency for markdown rendering
  - [ ] Add fsnotify v1.7+ dependency for file watching
  - [ ] Run `go mod tidy` to clean up dependencies
- [ ] Create build system (AC: 3, 4)
  - [ ] Create Makefile with build targets for macOS and Linux
  - [ ] Ensure single binary output named `spcstr`
  - [ ] Test build process on both macOS and Linux
- [ ] Implement basic CLI structure (AC: 6)
  - [ ] Create main.go with Cobra root command setup
  - [ ] Add basic version command
  - [ ] Verify binary size stays under 50MB
- [ ] Unit testing setup
  - [ ] Create test files following testing strategy structure
  - [ ] Add basic build tests to ensure compilation succeeds

## Dev Notes

### Previous Story Insights
No previous stories (this is story 1.1).

### Technical Requirements
- **Go Version**: 1.21+ required [Source: architecture/tech-stack.md#technology-stack-table]
- **Single Binary Rule**: All functionality must be accessible through the main spcstr binary via subcommands [Source: architecture/coding-standards.md#critical-go-rules]

### Dependency Management
Required dependencies with exact versions:
- **Cobra**: v1.8+ for command structure and hook subcommands [Source: architecture/tech-stack.md#technology-stack-table]
- **Bubbletea**: v0.25+ for terminal user interface [Source: architecture/tech-stack.md#technology-stack-table]
- **Lipgloss**: v0.9+ for terminal styling and layout [Source: architecture/tech-stack.md#technology-stack-table]
- **Glamour**: v0.6+ for document display with syntax highlighting [Source: architecture/tech-stack.md#technology-stack-table]
- **fsnotify**: v1.7+ for real-time file system monitoring [Source: architecture/tech-stack.md#technology-stack-table]

### File Locations
Based on project structure requirements:
- **Main Entry Point**: `cmd/spcstr/main.go` [Source: architecture/unified-project-structure.md]
- **Hook Handlers**: `internal/hooks/handlers/` directory [Source: architecture/unified-project-structure.md]
- **State Management**: `internal/state/` directory [Source: architecture/unified-project-structure.md]
- **TUI Components**: `internal/tui/` directory [Source: architecture/unified-project-structure.md]

### Build System Requirements
- **Build Tool**: Standard Go Build with cross-compilation support [Source: architecture/tech-stack.md#technology-stack-table]
- **Binary Size**: Must remain under 50MB [Source: Epic 1, AC 6]
- **Target Platforms**: macOS and Linux [Source: Epic 1, AC 4]

### Naming Conventions
- **File Names**: snake_case (e.g., `session_start.go`, `state_manager.go`) [Source: architecture/coding-standards.md#naming-conventions]
- **Package Names**: lowercase (e.g., `hooks`, `state`, `tui`) [Source: architecture/coding-standards.md#naming-conventions]

### Testing Requirements
**Test Structure**: Unit tests should be co-located with source files using `_test.go` suffix [Source: architecture/testing-strategy.md#unit-tests-structure]
**Test Framework**: Go Testing with table-driven test patterns [Source: architecture/tech-stack.md#technology-stack-table]

### Project Structure Alignment
Directory structure in acceptance criteria perfectly aligns with architecture document. No conflicts found.

## Testing
### Test Requirements from Architecture
- **Test Framework**: Built-in Go testing with table-driven patterns [Source: architecture/tech-stack.md#technology-stack-table]
- **Test File Locations**: Co-located with source files using `_test.go` suffix [Source: architecture/testing-strategy.md#unit-tests-structure]
- **Test Types**: Unit tests for build system validation [Source: architecture/testing-strategy.md#testing-pyramid]

### Specific Testing for This Story
- Verify `go mod init` creates valid go.mod file
- Validate all dependencies can be imported without errors
- Test build process produces executable binary
- Verify binary size constraints (<50MB)
- Test cross-platform compilation for macOS and Linux

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-05 | 1.0 | Initial story draft created | Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled during development*

### Debug Log References
*To be filled during development*

### Completion Notes List
*To be filled during development*

### File List
*To be filled during development*

## QA Results
*Results from QA Agent review will be populated after implementation*
